/*! httpx.js v0.1.0 | httpx.min.js | The simple HTTP / RESTful requests library of JavaScript (XHR). | MIT License | By: Pandao | https://github.com/pandao/httpx.js | 2015-06-16 */
!function(e){"use strict";"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&(define.amd||define.cmd)?define(e):window.httpx=e()}(function(){"use strict";var e={version:"0.1.0",xhr:function(){return new XMLHttpRequest},defaults:function(e){e=e||"";var t={async:!0,timeout:3e3,method:"GET",url:"",data:"",dataType:"text",headers:{},contentType:"text/plain; charset=UTF-8",jsonp:"callback",success:function(){},error:function(e,t){console.error("HTTP Request Error: ",e,t,this.status+" ("+(this.statusText?this.statusText:"Unkown Error / Timeout")+")")},ontimeout:function(e,t){console.error("HTTP Request Timeout: ",e,t,this.status+" ("+(this.statusText?this.statusText:"Timeout")+")")}};return""!==e&&"string"==typeof e?t[e]:t},request:function(e){e=e||{};var t=this.defaults();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);var o=t.url,r=t.data,s=t.method,a=this.urlBuild(o,r);r=a.data,"GET"===s&&(o=a.url);var i=this.xhr();i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status||304===i.status){var e;switch(t.dataType){case"json":e=JSON.parse(i.responseText);break;case"xml":e=i.responseXML;break;default:e=i.responseText}t.success.bind(i)(e)}else t.error.bind(i)(s,o)},i.ontimeout=function(){t.ontimeout.bind(i)(s,o)},i.onerror=function(){t.error.bind(i)(s,o)},i.open(s,o,!0),"GET"!==s?i.setRequestHeader("Content-type","application/x-www-form-urlencoded"):i.setRequestHeader("Content-type",t.contentType);for(var u in t.headers)i.setRequestHeader(u,t.headers[u]);i.$url=o,i.$method=s,i.$dataType=t.dataType,i.timeout=t.timeout,i.send(r)},exec:function(e,t,n,o,r){n=n||{},o=o||function(){},r=r||this.defaults("error"),"function"==typeof n&&(r=o,o=n,n="");var s={url:t,method:e,data:n,success:o,error:r};"object"==typeof t&&(s=t,s.method=e),this.request(s)},get:function(e,t,n,o){this.exec("GET",e,t,n,o)},post:function(e,t,n,o){this.exec("POST",e,t,n,o)},put:function(e,t,n,o){this.exec("PUT",e,t,n,o)},patch:function(e,t,n,o){this.exec("PATCH",e,t,n,o)},"delete":function(e,t,n,o){this.exec("DELETE",e,t,n,o)},json:function(e,t,n,o){t=t||{},n=n||function(){},o=o||this.defaults("error"),"function"==typeof t&&(o=n,n=t,t="");var r={url:e,dataType:"json",method:"GET",data:t,success:n,error:o};"object"==typeof e&&(r=e,r.method="GET",r.dataType="json"),this.request(r)},getJSON:function(e,t,n,o){this.json(e,t,n,o)},urlBuild:function(e,t){if("object"==typeof t){var n=[];for(var o in t)n.push(o+"="+encodeURIComponent(t[o]));t=n.join("&")}return e=e+(e.indexOf("?")<0?""!==t&&t?"?":"":""!==t&&t?"&":"")+t,{url:e,data:t}},jsonp:function(e,t,n,o){o=o||"callback","function"==typeof t&&(o=n,n=t,t="");var r=this.urlBuild(e,t);e=r.url,t=r.data;var s="__jsonp_"+o+(new Date).getTime()+"_"+Math.floor(1e5*Math.random())+"__";e+=(e.indexOf("?")<0?"?":"&")+o+"="+s;var a=function(t){return function(n){if("string"==typeof n)try{n=JSON.parse(n)}catch(o){}n=n||{},t(n,e),window[s]=null,document.body.removeChild(document.getElementById(s))}};window[s]=a(n);var i=document.createElement("script");i.src=e,i.async=!0,i.id=s,document.body.appendChild(i)},getScript:function(e,t){if(""===e)return void alert("Error: Get script source can't be empty");t=t||function(){};var n=document.getElementsByTagName("head")[0],o=document.querySelectorAll('script[src="'+e+'"]');o.length>0&&n.removeChild(o[0]);var r=document.createElement("script");r.type="text/javascript",r.onload=r.onreadystatechange=function(){(!r.readyState||/loaded|complete/.test(r.readyState))&&(r.onload=r.onreadystatechange=null,r=void 0,t())},r.src=e,r.async=!0,n.appendChild(r)}};return e});